<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Defiant.js - Sum, Avg</title>
<script type="text/javascript" src="/defiant.js/src/defiant.js"></script>
<script type="text/javascript" src="/defiant.js/src/string.js"></script>
<script type="text/javascript" src="/defiant.js/src/ie.polyfill.js"></script>
<script type="text/javascript" src="/defiant.js/src/json.js"></script>
<script type="text/javascript" src="/defiant.js/src/json.search.js"></script>
<script type="text/javascript" src="/defiant.js/src/json.toXML.js"></script>
<script type="text/javascript" src="/defiant.js/src/node.toJSON.js"></script>
<script type="text/javascript" src="/defiant.js/src/node.select.js"></script>
<script type="text/javascript" src="/defiant.js/src/node.serialize.js"></script>
</head>
<body>


<script type="text/javascript">

    var data = [
           { "x": 2, "y": 0 },
           { "x": 3, "y": 1 },
           { "x": 4, "y": 1 },
           { "x": 2, "y": 1 }
        ],
        res = JSON.search( data, '//*[ y > 0 ]' );

    console.log( res.sum('x') );
    // 9
    console.log( res.avg('x') );
    // 3
    console.log( res.min('x') );
    // 2
    console.log( res.max('x') );
    // 4
    res.multiply('x', 5);
    console.log( res );
    // [{ x=15, y=1}, { x=20, y=1}, { x=10, y=1}]

    res.each(function(row) {
        console.log( row );
    });
    // { x=15, y=1}
    // { x=20, y=1}
    // { x=10, y=1}

    var res2 = JSON.search( data, '//*[ x+y > 15 ]' );
    console.log( res2 );
  
</script>

</body>
</html>